/*!
 *  build: vue-admin-better 
 *  vue-admin-beautiful.com 
 *  https://gitee.com/chu1204505056/vue-admin-better 
 *  time: 2023-10-6 15:18:13
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-600e1076"],{"0b91":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-transfer",{attrs:{filterable:"",titles:["Persons",e.relationName],data:e.profileList},model:{value:e.SelectedId,callback:function(t){e.SelectedId=t},expression:"SelectedId"}},[o("el-select",{attrs:{slot:"left-footer",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.onChange},slot:"left-footer",model:{value:e.relationValue,callback:function(t){e.relationValue=t},expression:"relationValue"}},e._l(e.options,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),o("el-button",{staticClass:"transfer-footer",attrs:{slot:"right-footer",type:"primary",size:"small",icon:"el-icon-finished"},on:{click:e.addRelation},slot:"right-footer"},[e._v(" Submit ")]),o("el-button",{staticClass:"transfer-footer",attrs:{slot:"right-footer",type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.delRelation},slot:"right-footer"},[e._v(" Delete ")])],1)],1)},i=[],a=(o("41cf"),o("4360")),r=o("bc3a"),s=o.n(r),n=o("f121"),c={name:"Relation",components:{},directives:{},props:{profiles:{type:Array,default:()=>Array(40).fill({}),required:!0}},data(){const e=["我","妻子","丈夫","儿子","女儿","爸爸","妈妈","爷爷","奶奶","外公","外婆","家人","哥哥","姐姐","弟弟","妹妹","亲戚","男朋友","女朋友","同事","朋友","同学","闺蜜","客户","供应商","合作伙伴","其他"],t=e.map((e,t)=>({value:t,label:e}));return{SelectedId:[],relationValue:"",relationName:"",relationForm:[],options:t,profileList:[]}},watch:{profiles(e,t){console.log("Album.content: Album numbers have been changed",e.length,this.total,this.msg),this.genPersonList(e)}},created(){console.log("Relation: created")},mounted(){console.log("Relation: mounted",this.profiles)},activated(){console.log("Relation: activated")},deactivated(){console.log("Relation: deactivated")},methods:{onChange(e){console.log("Relation: onChange",e),this.relationName=this.options.find(t=>t.value===e).label,console.log("Relation: onChange",this.relationName)},genPersonList(e){this.profileList=[];for(let t=0;t<e.length;t++)this.profileList.push({key:e[t].id,label:e[t].name})},creatFormData(){if(""===this.relationValue)return void this.$message({message:"请选择关系",type:"warning"});const e=a["default"].getters["user/id"];console.log("Relation: onSubmit->SelectedId and userId are: ",this.SelectedId,e),console.log("Relation: onSubmit",this.relationValue,this.relationName);const t=[];for(let o=0;o<this.SelectedId.length;o++){const l=this.SelectedId[o],i=e,a=this.relationValue;t.push({re_from:l,re_to:i,relation:a})}this.relationForm=t},async addRelation(){console.log("Relation: addRelation",this.relationForm),this.creatFormData(),await s.a.post(n["baseURL"]+"/api/recontact/",this.relationForm,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Response:",e.data)}).catch(e=>{console.error("Error:",e)})},async delRelation(){console.log("Relation: addRelation",this.relationForm),this.creatFormData(),await s.a.delete(n["baseURL"]+"/api/recontact/",this.relationForm,{headers:{"Content-Type":"application/json"}}).then(e=>{console.log("Response:",e.data)}).catch(e=>{console.error("Error:",e)})}}},d=c,f=o("2877"),u=Object(f["a"])(d,l,i,!1,null,null,null);t["default"]=u.exports},1936:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.searchable?o("ProfileSearch",{on:{handleProfileSearch:e.onProfileSearch}}):e._e(),o("AlbumContainer",{attrs:{items:e.profiles.data,total:e.profiles.totalCnt,title:e.profiles.title,busy:e.profiles.loading,finished:e.profiles.finished},on:{albumClick:e.onRouteJump,load:e.onLoad}})],1)},i=[],a=o("41cf"),r=o("7f87"),s=o("44cc"),n={name:"ProfileList",components:{ProfileSearch:s["default"],AlbumContainer:a["default"]},directives:{},props:{query:{type:Object,default:null,required:!1}},data:function(){return{profiles:{title:"Profile List",loading:!1,finished:!1,checkedId:-1,checkedIndex:-1,totalCnt:0,links:null,curCnt:0,data:[],queryForm:{page:1,size:30}},searchable:!0}},watch:{},created(){},mounted(){this.profiles.queryForm.page=1,this.fetchProfile()},methods:{onRouteJump(e,t){console.log("recieved the child component value %d,%o",e,t),this.profiles.checkedIndex=e,this.profiles.checkedId=t.id||0,this.$router.push({name:"ProfileDetail",query:{id:t.id,title:t.name}})},async fetchProfile(){console.log("ProfileList: fetchProfile"),this.profiles.loading=!0,this.profiles.finished=!1,await Object(r["getProfile"])(this.profiles.queryForm).then(e=>{console.log("getProfileChangeAvatar",e);const{data:t,totalCnt:o,links:l}=e;this.profiles.data=[...this.profiles.data,...t],this.profiles.curCnt=this.profiles.data.length,this.profiles.totalCnt=o,this.profiles.links=l,null===this.profiles.links.next&&(this.profiles.finished=!0),this.$emit("profileData",this.profiles.data)}),setTimeout(()=>{this.profiles.loading=!1},300)},onLoad(){console.log("ProfileList: onLoad"),this.profiles.loading=!0,this.profiles.finished?setTimeout(()=>{this.profiles.loading=!1},3e3):(this.profiles.queryForm.page++,this.fetchProfile())},onProfileSearch(e){console.log("recieve the queryForm info from the search component"),console.log(e),this.profiles.queryForm=e,this.profiles.totalCnt=0,this.profiles.data=[],this.fetchProfile()}}},c=n,d=o("2877"),f=Object(d["a"])(c,l,i,!1,null,null,null);t["default"]=f.exports},2821:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"Profiles",name:"profiles"}},["profiles"===e.activeName?o("ProfileList"):e._e()],1),o("el-tab-pane",{attrs:{label:"Groups",name:"groups"}},["groups"===e.activeName?o("GroupList"):e._e()],1),o("el-tab-pane",{attrs:{label:"Faces",name:"faces"}},["faces"===e.activeName?o("FaceList"):e._e()],1),o("el-tab-pane",{attrs:{label:"FacesGallery",name:"faces-gallery"}},["faces-gallery"===e.activeName?o("FaceListGallery"):e._e()],1),o("el-tab-pane",{attrs:{label:"Relation",name:"relation"}},["relation"===e.activeName?o("Relation"):e._e()],1)],1)],1)},i=[],a=o("1936"),r=o("bcc9"),s=o("f5d0"),n=o("71d9"),c=o("cea45"),d={name:"Face",components:{ProfileList:a["default"],GroupList:r["default"],FaceList:s["default"],FaceListGallery:n["default"],Relation:c["default"]},directives:{},data:function(){return{activeName:"profiles"}},watch:{},created(){},mounted(){},methods:{handleClick(e,t){console.log(e,t)}}},f=d,u=o("2877"),h=Object(u["a"])(f,l,i,!1,null,null,null);t["default"]=h.exports},"44cc":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"search-container"},[o("el-input",{attrs:{clearable:"",placeholder:"Please input what you want"},on:{change:e.onSearch},model:{value:e.profileQuery.search,callback:function(t){e.$set(e.profileQuery,"search",t)},expression:"profileQuery.search"}},[o("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},on:{click:e.advancedSearch},slot:"prefix"}),o("el-dropdown",{attrs:{slot:"append",icon:"el-icon-delete"},on:{command:e.handleCommand},slot:"append"},[o("span",{staticClass:"el-dropdown-link"},[o("i",{staticClass:"el-icon-menu el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"edit"}},[o("i",{staticClass:"el-icon-edit"}),e._v(" Edit ")]),o("el-dropdown-item",{attrs:{command:"view"}},[o("i",{staticClass:"el-icon-view"}),e._v(" View ")]),o("el-dropdown-item",{attrs:{command:"delete"}},[o("i",{staticClass:"el-icon-delete"}),e._v(" Reset ")]),o("el-dropdown-item",{attrs:{command:"setting"}},[o("i",{staticClass:"el-icon-setting"}),e._v(" Setting ")])],1)],1)],1),e.advanced?o("div",{staticClass:"advancedSearch"},[o("el-select",{attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"Relation to Me",loading:e.loading},on:{change:e.onSearch},model:{value:e.profileQuery.relation,callback:function(t){e.$set(e.profileQuery,"relation",t)},expression:"profileQuery.relation"}},e._l(e.filterList.relation,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t,disabled:!1}},[o("span",{staticStyle:{float:"left",color:"#8492a6"}},[e._v(e._s(t))])])})),1),o("el-select",{attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"Friend Name",loading:e.loading},on:{change:e.onSearch},model:{value:e.profileQuery.name,callback:function(t){e.$set(e.profileQuery,"name",t)},expression:"profileQuery.name"}},e._l(e.filterList.name,(function(t){return o("el-option",{key:t.name,attrs:{label:t.name,value:t.name,disabled:!1}},[o("span",{staticStyle:{float:"left",color:"#8492a6"}},[e._v(e._s(t.name))]),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(" "+e._s(t.value)+" ")])])})),1),o("el-select",{attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"Is Defined a Relation?",loading:e.loading},on:{change:e.onSearch},model:{value:e.profileQuery.re_from_relations__isnull,callback:function(t){e.$set(e.profileQuery,"re_from_relations__isnull",t)},expression:"profileQuery.re_from_relations__isnull"}},e._l(e.filterList.re_from_relations__isnull,(function(t){return o("el-option",{key:t.name,attrs:{label:t.name,value:t.value,disabled:!1}},[o("span",{staticStyle:{float:"left",color:"#8492a6"}},[e._v(e._s(t.name))])])})),1)],1):e._e()],1)},i=[],a=o("7f87"),r={name:"ProfileSearch",components:{},props:{filteredList:{type:Object,default:function(){return{face_color:["skin","black","grey","blue","light grey"],fore_color:["light brown","beige","light blue"],back_color:["black","blue","light grey"]}},required:!1}},data(){return{profileQuery:{page:1,size:25,search:"",re_from_relations__isnull:"",re_to_relations__isnull:"",profile:"",relation:""},filterList:{},loading:!1,advanced:!1}},watch:{},created(){},mounted(){this.fetchCategory()},methods:{onSearch(){this.profileQuery.page=1;let e=Object.assign({},this.profileQuery);for(let t in this.profileQuery)Array.isArray(this.profileQuery[t])&&(e[t]=this.profileQuery[t].toString());console.log("onCateSearch",this.profileQuery,e),this.$emit("handleProfileSearch",e),this.fetchCategory(e)},onCateSearch(e){this.profileQuery.page=1;let t=Object.assign({},this.profileQuery);t.categories__name=e,this.$emit("handleProfileSearch",t),this.fetchCategory(t)},async fetchCategory(e){console.log("start to get the Category list...");const{data:t}=await Object(a["getFilterList"])(e);this.filterList=t,console.log("this.filterList",this.filterList,t)},reset_search(){console.log(this.$data),console.log(this.$options.data()),Object.assign(this.$data,this.$options.data()),this.fetchCategory(),this.onSearch()},advancedSearch(){console.log("advancedSearch"),this.advanced=!this.advanced},handleCommand(e){this.$message("click on item "+e),"reset"===e?this.reset_search():this.$emit(e)}}},s=r,n=o("2877"),c=Object(n["a"])(s,l,i,!1,null,"ac2dc886",null);t["default"]=c.exports},bcc9:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("AlbumContainer",{attrs:{items:e.groups.data,total:e.groups.totalCnt,title:e.groups.title,busy:e.groups.loading,finished:e.groups.finished},on:{albumClick:e.onRouteJump,load:e.onLoad}})],1)},i=[],a=o("41cf"),r=o("c405"),s={name:"GroupList",components:{AlbumContainer:a["default"]},directives:{},props:{query:{type:Object,default:null,required:!1}},data:function(){return{groups:{title:"Profile List",loading:!1,finished:!1,checkedId:-1,checkedIndex:-1,totalCnt:0,links:null,curCnt:0,data:[],queryForm:{page:1,size:30,name:"",parent__name:"group"}}}},watch:{},created(){},mounted(){this.groups.queryForm.page=1,this.fetchGroup()},methods:{onRouteJump(e,t){console.log("recieved the child component value %d,%o",e,t),this.groups.checkedIndex=e,this.groups.checkedId=t.id||0,this.$router.push({name:"GroupDetail",query:{id:t.id,title:t.name}})},async fetchGroup(){console.log("GroupList: fetchGroup"),this.groups.loading=!0,this.groups.finished=!1,await Object(r["getCategory"])(this.groups.queryForm).then(e=>{console.log("GroupList: ",e);const{data:t,totalCnt:o,links:l}=e;this.groups.data=[...this.groups.data,...t],this.groups.curCnt=this.groups.data.length,this.groups.totalCnt=this.groups.data.length,this.groups.links=l,null===this.groups.links.next&&(this.groups.finished=!0),this.$emit("groupData",this.groups.data),setTimeout(()=>{this.groups.loading=!1},300)})},onLoad(){console.log("GroupList: onLoad"),this.groups.loading=!0,this.groups.finished?setTimeout(()=>{this.groups.loading=!1},3e3):(this.groups.queryForm.page++,this.fetchGroup())}}},n=s,c=o("2877"),d=Object(c["a"])(n,l,i,!1,null,null,null);t["default"]=d.exports},c405:function(e,t,o){"use strict";o.r(t),o.d(t,"getCategory",(function(){return i})),o.d(t,"getCategoryDetail",(function(){return a}));var l=o("b775");function i(e){return console.log(e),Object(l["default"])({url:"/api/category/",method:"get",params:e})}function a(e){return console.log(e),Object(l["default"])({url:"/api/category/"+e+"/",method:"get"})}},cea45:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.searchable?o("ProfileSearch",{on:{handleProfileSearch:e.onProfileSearch}}):e._e(),o("Transfer",{attrs:{profiles:e.profiles.data}}),o("AlbumContainer",{attrs:{items:e.profiles.data,total:e.profiles.totalCnt,title:e.profiles.title,busy:e.profiles.loading,finished:e.profiles.finished},on:{albumClick:e.onRouteJump,load:e.onLoad}})],1)},i=[],a=o("41cf"),r=o("7f87"),s=o("44cc"),n=o("0b91"),c={name:"Relation",components:{AlbumContainer:a["default"],ProfileSearch:s["default"],Transfer:n["default"]},directives:{},props:{},data(){return{profiles:{title:"Profile List",loading:!1,finished:!1,checkedId:-1,checkedIndex:-1,totalCnt:0,links:null,curCnt:0,data:[],queryForm:{page:1,size:30}},searchable:!0}},watch:{},created(){console.log("Relation: created")},mounted(){console.log("Relation: mounted"),this.profiles.queryForm.page=1,this.fetchProfile()},activated(){console.log("Relation: activated")},deactivated(){console.log("Relation: deactivated")},methods:{async fetchProfile(){console.log("ProfileList: fetchProfile"),this.profiles.loading=!0,this.profiles.finished=!1,await Object(r["getProfile"])(this.profiles.queryForm).then(e=>{console.log("getProfileChangeAvatar",e);const{data:t,totalCnt:o,links:l}=e;this.profiles.data=[...this.profiles.data,...t],this.profiles.curCnt=this.profiles.data.length,this.profiles.totalCnt=o,this.profiles.links=l,null===this.profiles.links.next&&(this.profiles.finished=!0),this.$emit("profileData",this.profiles.data)}),setTimeout(()=>{this.profiles.loading=!1},300)},onRouteJump(e,t){console.log("recieved the child component value %d,%o",e,t)},onLoad(){console.log("ProfileList: onLoad"),this.profiles.loading=!0,this.profiles.finished?setTimeout(()=>{this.profiles.loading=!1},3e3):(this.profiles.queryForm.page++,this.fetchProfile())},onProfileSearch(e){console.log("recieve the queryForm info from the search component"),console.log(e),this.profiles.queryForm=e,this.profiles.totalCnt=0,this.profiles.data=[],this.fetchProfile()}}},d=c,f=o("2877"),u=Object(f["a"])(d,l,i,!1,null,null,null);t["default"]=u.exports}}]);