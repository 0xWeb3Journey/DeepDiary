/*!
 *  build: vue-admin-better 
 *  vue-admin-beautiful.com 
 *  https://gitee.com/chu1204505056/vue-admin-better 
 *  time: 2023-10-28 08:46:51
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb255eb8"],{"1add":function(e,t,i){},"3e07":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header-container"},[i("el-page-header",{attrs:{content:e.content},on:{back:e.goBack}}),i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[e._v(" 菜单 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"edit"}},[e._v("人物信息编辑")]),i("el-dropdown-item",{attrs:{command:"remove"}},[e._v("移除该人物")])],1)],1)],1)},o=[],r={name:"DetailHead",components:{},props:{content:{type:String,default:"人脸详情",required:!0}},methods:{goBack(){console.log("go back"),this.$router.go(-1)},handleCommand(e){this.$message("click on item "+e),this.$emit(e)}}},l=r,n=(i("4ae9"),i("2877")),s=Object(n["a"])(l,a,o,!1,null,null,null);t["default"]=s.exports},"4ae9":function(e,t,i){"use strict";i("1add")},"635a":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"before-close":e.handleClose,"close-on-click-modal":!1,title:e.title,visible:e.dialogFormVisible,width:"909px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("div",{staticClass:"upload"},[i("el-alert",{attrs:{closable:!1,title:"支持jpg、jpeg、png格式，单次可最多选择"+e.limit+"张图片，每张不可大于"+e.size+"M，如果大于"+e.size+"M会自动为您过滤",type:"info"}}),i("br"),i("el-upload",{ref:"upload",staticClass:"upload-content",attrs:{action:e.action,"auto-upload":!1,"close-on-click-modal":!1,data:e.data,"file-list":e.fileList,headers:e.headers,limit:e.limit,multiple:!0,name:e.name,"on-change":e.handleChange,"on-error":e.handleError,"on-exceed":e.handleExceed,"on-preview":e.handlePreview,"on-progress":e.handleProgress,"on-remove":e.handleRemove,"on-success":e.handleSuccess,accept:"image/png, image/jpeg","list-type":"picture-card"}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"trigger"},slot:"trigger"}),i("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",title:"查看大图"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",[i("img",{attrs:{src:e.dialogImageUrl,alt:"",width:"100%"}})])])],1)],1),i("div",{staticClass:"dialog-footer",staticStyle:{position:"relative","padding-right":"15px","text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[e.show?i("div",{staticStyle:{position:"absolute",top:"10px",left:"15px",color:"#999"}},[e._v(" 正在上传中... 当前上传成功数:"+e._s(e.imgSuccessNum)+"张 当前上传失败数:"+e._s(e.imgErrorNum)+"张 ")]):e._e(),i("el-button",{attrs:{type:"primary"},on:{click:e.handleClose}},[e._v("关闭")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{loading:e.loading,size:"small",type:"success"},on:{click:e.submitUpload}},[e._v(" 开始上传 ")])],1)])},o=[],r=i("f121"),l=i("4360"),n=i("970f"),s={name:"Upload",props:{url:{type:String,default:"api/img/",required:!0},name:{type:String,default:"src",required:!0},limit:{type:Number,default:500,required:!0},size:{type:Number,default:8,required:!0}},data(){return{show:!1,loading:!1,dialogVisible:!1,dialogImageUrl:"",action:r["baseURL"]+this.url,headers:{Authorization:"Bearer "+l["default"].getters["user/accessToken"]},fileList:[],picture:"picture",imgNum:0,imgSuccessNum:0,imgErrorNum:0,typeList:null,title:"上传",dialogFormVisible:!1,data:{}}},computed:{percentage(){return 0==this.allImgNum?0:100*this.$baseLodash.round(this.imgNum/this.allImgNum,2)}},methods:{submitUpload(){this.api=`${window.location.protocol}//${window.location.host}`,this.action=this.api+this.url,console.log("this.action:",this.action,"production",r["baseURL"]),this.$refs.upload.submit()},handleProgress(e,t,i){this.loading=!0,this.show=!0},handleChange(e,t){e.size>1048576*this.size?(t.map((i,a)=>{i===e&&t.splice(a,1)}),this.fileList=t):this.allImgNum=t.length},handleSuccess(e,t,i){this.imgNum=this.imgNum+1,this.imgSuccessNum=this.imgSuccessNum+1,i.length===this.imgNum&&setTimeout(()=>{this.$baseMessage(`上传完成! 共上传${i.length}张图片`,"success")},1e3),setTimeout(()=>{this.loading=!1,this.show=!1},1e3)},handleError(e,t,i){this.imgNum=this.imgNum+1,this.imgErrorNum=this.imgErrorNum+1,this.$baseMessage(`文件[${t.raw.name}]上传失败,文件大小为${this.$baseLodash.round(t.raw.size/1024,0)}KB`,"error"),setTimeout(()=>{this.loading=!1,this.show=!1},1e3)},handleRemove(e,t){this.imgNum=this.imgNum-1,this.allNum=this.allNum-1},handlePreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed(e,t){this.$baseMessage(`当前限制选择 ${this.limit} 个文件，本次选择了\n           ${e.length}\n           个文件`,"error")},handleShow(e){this.title="上传",this.data=e,this.dialogFormVisible=!0},handleClose(){this.fileList=[],this.picture="picture",this.allImgNum=0,this.imgNum=0,this.imgSuccessNum=0,this.imgErrorNum=0,this.uploadFinished(),this.dialogFormVisible=!1},async uploadFinished(){console.log("handleClose");const{msg:e}=await Object(n["getUploadState"])("");this.$message({message:e,type:"success"})}}},u=s,c=(i("73d2"),i("2877")),d=Object(c["a"])(u,a,o,!1,null,"2c7c9ebb",null);t["default"]=d.exports},"63a6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gallery-container"},[i("vab-upload",{ref:"vabUpload",attrs:{url:"/api/img/",name:"src",limit:50,size:8}}),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(e.name)+"("+e._s(e.items.length)+" / "+e._s(e.total)+")")]),i("el-button-group",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.onChangeDsipType}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.handleShow({key:"value"})}}})],1)],1),i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],ref:"gallery",staticClass:"infinite-list",staticStyle:{overflow:"auto"},attrs:{id:"gallery"}},e._l(e.items,(function(t){return i("a",{key:t.id,staticClass:"gallery infinite-list-item",attrs:{className:"gallery-item","data-src":"oss"===e.storageType?t.img:t.mcs.nft_url,"data-sub-html":t.desc}},[i("img",{attrs:{className:"img-responsive",src:!0===e.isDispFace?t.thumb_face:t.thumb}})])})),0)])],1)},o=[],r=i("1157"),l=i.n(r),n=i("2690"),s=i("c3c6"),u=i("c79a"),c=i("4dcd"),d=i("c1da"),m=i("5c2b"),g=(i("5abb"),i("5d6f"),i("cfd5"),i("a809"),i("635a")),h={name:"Gallery",components:{VabUpload:g["default"]},props:{items:{type:Array,default:()=>[],required:!0},name:{type:String,default:"88888888888888",required:!0},total:{type:Number,default:50,required:!0},dispType:{type:String,default:"face",required:!0},storageType:{type:String,default:"oss",required:!1},limit:{type:Number,default:50,required:!1},size:{type:Number,default:8,required:!1}},data(){return{isDispFace:"face"===this.dispType}},computed:{},watch:{items(e,t){this.$nextTick(()=>{console.log("gallery have been changed"),window.gallery.refresh(),l()("#gallery").justifiedGallery()})}},created(){},mounted(){this.lgInit(),this.justifyInit()},methods:{justifyInit:function(){l()("#gallery").justifiedGallery({captions:!1,lastRow:"left",rowHeight:150,margins:5}).on("jg.complete",(function(){console.log("jg.complete event was trigged")}))},lgInit:function(){const e=document.getElementById("gallery");window.gallery=Object(n["a"])(e,{addClass:"gallery",autoplayFirstVideo:!1,pager:!1,galleryId:"nature",plugins:[s["a"],u["a"],c["a"],d["a"],m["a"]],thumbnail:!0,slideShowInterval:2e3,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1,rotate:!1}})},onChangeDsipType(){this.isDispFace=!this.isDispFace,console.log("onChangeDsipType, current isDispFace: %s",this.isDispFace)},handleShow(e){this.$refs["vabUpload"].handleShow(e)},load(){console.log("loading...")}}},p=h,f=i("2877"),b=Object(f["a"])(p,a,o,!1,null,"d29b2178",null);t["default"]=b.exports},"73d2":function(e,t,i){"use strict";i("db9f")},"970f":function(e,t,i){"use strict";i.r(t),i.d(t,"getImg",(function(){return o})),i.d(t,"getImgDetail",(function(){return r})),i.d(t,"getMcs",(function(){return l})),i.d(t,"getTags",(function(){return n})),i.d(t,"getUploadState",(function(){return s})),i.d(t,"getProfile",(function(){return u})),i.d(t,"getProfileDetail",(function(){return c})),i.d(t,"changeFaceAlbumName",(function(){return d})),i.d(t,"clear_face_album",(function(){return m})),i.d(t,"getFace",(function(){return g})),i.d(t,"changeFaceName",(function(){return h})),i.d(t,"getFaceGallery",(function(){return p})),i.d(t,"doEdit",(function(){return f})),i.d(t,"doDelete",(function(){return b})),i.d(t,"upload",(function(){return y})),i.d(t,"getFilterList",(function(){return v})),i.d(t,"getAddress",(function(){return w}));var a=i("b775");function o(e){return Object(a["default"])({url:"/api/img/",method:"get",params:e})}function r(e){return Object(a["default"])({url:"/api/img/"+e+"/",method:"get"})}function l(e){return Object(a["default"])({url:"/api/mcs/"+e.id+"/",method:"get"})}function n(e){return Object(a["default"])({url:"/api/img/"+e.id+" / set_tags/",method:"get"})}function s(e){return Object(a["default"])({url:"/api/img/upload_finished/",method:"get"})}function u(e){return Object(a["default"])({url:"/api/profile/",method:"get",params:e})}function c(e){return Object(a["default"])({url:"/api/profile/"+e.id+"/",method:"get",params:e})}function d(e){return Object(a["default"])({url:"/api/profile/"+e.id+"/",method:"put",data:e})}function m(e){return Object(a["default"])({url:"/api/profile/clear_face_album/",method:"get"})}function g(e){return Object(a["default"])({url:"/api/face/"+e.id+"/",method:"get"})}function h(e){return Object(a["default"])({url:"/api/face/"+e.id+"/",method:"put",data:e})}function p(e){return console.log(e),Object(a["default"])({url:"/api/face/",method:"get",params:e})}function f(e){return Object(a["default"])({url:"/gallery/doEdit",method:"post",data:e})}function b(e){return Object(a["default"])({url:"/gallery/doDelete",method:"post",data:e})}function y(e){return Object(a["default"])({url:"/api/img/",method:"post",data:e})}function v(e){return console.log(e),Object(a["default"])({url:"/api/category/get_filter_list/",method:"get",params:e})}function w(e){return console.log(e),Object(a["default"])({url:"/api/address/",method:"get",params:e})}},c067:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gallery-container"},[i("el-carousel",{attrs:{interval:2e3,"indicator-position":"none",arrow:"always",height:"300px",type:"card"},on:{change:e.carouselChange}},e._l(e.items,(function(e){return i("el-carousel-item",{key:e.id},[i("el-row",{attrs:{gutter:12}},[i("el-col",{staticStyle:{height:"400px","margin-bottom":"20px display: flex","align-items":"center","justify-content":"center"}},[i("img",{ref:"banner",refInFor:!0,staticStyle:{"max-width":"100%","max-height":"100%","object-fit":"contain"},attrs:{src:e.thumb,alt:""}})])],1)],1)})),1)],1)},o=[],r={name:"Carosel",components:{},props:{items:{type:Array,default:()=>[],required:!0},title:{type:String,default:"deep-diary",required:!1}},data(){return{bannerHeight:""}},watch:{items(e,t){console.log("Carosel: watch items changed",e)}},created(){},mounted(){},methods:{carouselChange:function(e,t){}}},l=r,n=i("2877"),s=Object(n["a"])(l,a,o,!1,null,"4fef49c5",null);t["default"]=s.exports},c405:function(e,t,i){"use strict";i.r(t),i.d(t,"getCategory",(function(){return o})),i.d(t,"getCategoryDetail",(function(){return r}));var a=i("b775");function o(e){return console.log(e),Object(a["default"])({url:"/api/category/",method:"get",params:e})}function r(e){return console.log(e),Object(a["default"])({url:"/api/category/"+e+"/",method:"get"})}},db9f:function(e,t,i){},f9d7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("DetailHead",{attrs:{content:"合影详情"},on:{edit:e.onEdit,remove:e.onRemove}}),i("Carosel",{attrs:{title:"照片",items:e.groups}}),i("Gallery",{ref:"face",attrs:{name:e.$route.query.title,items:e.groups,total:e.groups.length,"disp-type":"img"}})],1)},o=[],r=i("63a6"),l=i("c067"),n=i("c405"),s=i("3e07"),u={name:"GroupDetail",components:{Gallery:r["default"],Carosel:l["default"],DetailHead:s["default"]},data(){return{groups:[],totalCnt:0,queryForm:{id:""}}},computed:{},watch:{"queryForm.id"(e,t){console.log("this.faceQueryForm.id have bee changed: %d --\x3e %d",t,e),this.groups=[],this.fetchGroupDetail()}},created(){console.log("component have been created --")},mounted(){console.log("component have been mounted --")},activated(){console.log("the face component is activated"),this.queryForm.id=this.$route.query.id},deactivated(){console.log("the face component is deactivated")},methods:{async fetchGroupDetail(){console.log("start to get the fetchGroupDetail..."),this.queryForm.id=this.$route.query.id;const{data:e}=await Object(n["getCategoryDetail"])(this.$route.query.id);console.log("fetchGroupDetail: ",e),this.groups=[...e.imgs]},beforeRouteEnter(e,t,i){console.log("beforeRouteEnter....")},beforeRouteLeave(e,t,i){console.log("beforeRouteLeave....")},onEdit(){console.log("groupDetail: onEdit")},onRemove(){console.log("groupDetail: onRemove")}}},c=u,d=i("2877"),m=Object(d["a"])(c,a,o,!1,null,null,null);t["default"]=m.exports}}]);